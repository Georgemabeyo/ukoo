<?php
session_start();
$isLoggedIn = isset($_SESSION['user_id']);
$currentPage = basename($_SERVER['PHP_SELF']);
?>
<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Matukio | Ukoo wa Makomelelo</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
/* Global */
body, html { margin:0; padding:0; font-family:'Segoe UI', sans-serif; transition: background 0.3s,color 0.3s; }
a { text-decoration:none; }

/* Light/Dark Mode */
body.light-mode { background:#f0f4f8; color:#222; }
body.dark-mode { background:#1e293b; color:#f8fafc; }

/* Header */
header {
    display:flex; justify-content:space-between; align-items:center;
    padding:15px 25px; border-radius:0 0 15px 15px;
    background:linear-gradient(90deg,#0d47a1,#1976d2); position:relative; z-index:1000;
}
.logo { font-size:1.8rem; font-weight:700; color:#ffc107; }
.nav-links { display:flex; gap:15px; align-items:center; flex-wrap:wrap; }
.nav-links a { color:#ffc107; font-weight:600; padding:8px 12px; border-radius:6px; transition:0.3s; }
.nav-links a:hover, .nav-links a.active { background:#ffc107; color:#0d47a1; }

.nav-toggle {
    display:none; flex-direction:column; justify-content:space-between;
    width:30px; height:24px; background:transparent; border:none; cursor:pointer;
}
.nav-toggle span { display:block; height:3px; background:#ffc107; border-radius:2px; transition:all 0.4s; }
.nav-toggle.active span:nth-child(1){ transform:rotate(45deg) translate(5px,5px);}
.nav-toggle.active span:nth-child(2){ opacity:0; }
.nav-toggle.active span:nth-child(3){ transform:rotate(-45deg) translate(5px,-5px); }

/* Events */
.events-container {
    display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
    gap:25px; max-width:1200px; margin:40px auto; padding:0 15px;
}
.event-card {
    background:white; border-radius:12px; box-shadow:0 6px 15px rgba(0,0,0,0.1);
    display:flex; flex-direction:column; transition: transform 0.3s ease, background 0.3s, color 0.3s;
}
body.dark-mode .event-card { background:#334155; color:#f8fafc; }
.event-card:hover { transform:translateY(-8px); box-shadow:0 12px 25px rgba(0,0,0,0.15); }
.event-image { width:100%; height:180px; object-fit:cover; border-radius:12px 12px 0 0; }
.event-content { padding:20px; flex-grow:1; display:flex; flex-direction:column; justify-content:space-between; }
.event-title { font-size:1.4rem; font-weight:700; margin-bottom:10px; color:#0d47a1; }
body.dark-mode .event-title { color:#facc15; }
.event-date { font-size:0.9rem; margin-bottom:15px; font-style:italic; color:#666; }
body.dark-mode .event-date { color:#cbd5e1; }
.event-description { flex-grow:1; font-size:1rem; margin-bottom:20px; color:#444; }
body.dark-mode .event-description { color:#f1f5f9; }
.btn-readmore {
    align-self:flex-start; background-color:#0d47a1; color:#ffc107; border:none;
    padding:10px 16px; border-radius:6px; text-decoration:none; font-weight:600; transition:0.3s;
}
.btn-readmore:hover, .btn-readmore:focus { background-color:#084298; color:#ffc107; outline:none; }
body.dark-mode .btn-readmore { background:#2563eb; color:#facc15; }
body.dark-mode .btn-readmore:hover { background:#1e40af; }

/* Footer */
footer { text-align:center; padding:20px; border-radius:15px; background:#2563eb; color:#facc15; margin-top:50px; }

/* Responsive */
@media(max-width:768px){
    .nav-links { flex-direction:column; position:absolute; top:100%; right:20px; background:linear-gradient(180deg,#0d47a1,#1976d2);
        border-radius:10px; overflow:hidden; max-height:0; transition:max-height 0.35s ease, box-shadow 0.35s;
    }
    .nav-links.show { max-height:500px; box-shadow:0 8px 16px rgba(0,0,0,0.3);}
    .nav-toggle { display:flex;}
}
</style>
</head>
<body>

<header>
    <div class="logo">Ukoo wa Makomelelo</div>
    <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span><span></span><span></span>
    </button>
    <nav class="nav-links">
        <a href="index.php" class="<?= $currentPage=='index.php'?'active':'' ?>">Nyumbani</a>
        <a href="registration.php" class="<?= $currentPage=='registration.php'?'active':'' ?>">Jisajiri</a>
        <a href="family_tree.php" class="<?= $currentPage=='family_tree.php'?'active':'' ?>">Ukoo</a>
        <a href="events.php" class="<?= $currentPage=='events.php'?'active':'' ?>">Matukio</a>
        <a href="contact.php" class="<?= $currentPage=='contact.php'?'active':'' ?>">Mawasiliano</a>
        <?php if($isLoggedIn): ?>
        <a href="logout.php">Toka</a>
        <?php else: ?>
        <a href="login.php">Ingia</a>
        <?php endif; ?>
        <span id="toggleTheme" style="cursor:pointer;font-weight:700;">Dark Mode</span>
    </nav>
</header>

<section class="events-container">
    <article class="event-card">
        <img src="https://images.unsplash.com/photo-1468071174046-657d9d351a40?auto=format&fit=crop&w=600&q=80" alt="Mkutano Mkuu" class="event-image" />
        <div class="event-content">
            <h2 class="event-title">Mkutano Mkuu wa Ukoo January 2026</h2>
            <time datetime="2026-01-15" class="event-date">January 15, 2026</time>
            <p class="event-description">Tukio hili linaangazia umuhimu wa kujua asili na kuendeleza urithi wa ukoo.</p>
            <a href="#" class="btn-readmore">Soma Zaidi</a>
        </div>
    </article>
    <article class="event-card">
        <img src="https://images.unsplash.com/photo-1515377905703-c4788e51af15?auto=format&fit=crop&w=600&q=80" alt="Michango" class="event-image" />
        <div class="event-content">
            <h2 class="event-title">Michango Mbalimbali ya Wanaukoo</h2>
            <time datetime="2025-08-14" class="event-date">Endelevu (Inatokea)</time>
            <p class="event-description">Wanaukoo wote mnaombwa kujitahidi na kuhamasika zaidi katika michango mbalimbali.</p>
            <a href="#" class="btn-readmore">Soma Zaidi</a>
        </div>
    </article>
    <article class="event-card">
        <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=600&q=80" alt="Mkutano Mkuu Familia" class="event-image" />
        <div class="event-content">
            <h2 class="event-title">Mkutano Mkuu wa Familia 2025</h2>
            <time datetime="2025-01-02" class="event-date">January 1, 2025</time>
            <p class="event-description">Familia ya Makomelelo ilikusanyika kusherehekea urithi na historia yao.</p>
            <a href="#" class="btn-readmore">Soma Zaidi</a>
        </div>
    </article>
</section>

<footer>
    &copy; 2025 Ukoo wa Makomelelo | Haki zote zimehifadhiwa
</footer>

<script>
// Navbar toggle
const toggleBtn = document.querySelector('.nav-toggle');
const navLinks = document.querySelector('.nav-links');
toggleBtn.addEventListener('click', ()=>{ toggleBtn.classList.toggle('active'); navLinks.classList.toggle('show'); });

// Theme toggle with persistence
const themeToggle = document.getElementById('toggleTheme');
const storedTheme = localStorage.getItem('theme');
if(storedTheme){ 
    document.body.classList.add(storedTheme); 
    themeToggle.textContent = storedTheme==='dark-mode'?'Light Mode':'Dark Mode'; 
} else { 
    document.body.classList.add('light-mode'); 
    themeToggle.textContent='Dark Mode'; 
}
themeToggle.addEventListener('click', ()=>{
    if(document.body.classList.contains('light-mode')){
        document.body.classList.replace('light-mode','dark-mode');
        themeToggle.textContent='Light Mode';
        localStorage.setItem('theme','dark-mode');
    } else {
        document.body.classList.replace('dark-mode','light-mode');
        themeToggle.textContent='Dark Mode';
        localStorage.setItem('theme','light-mode');
    }
});
</script>

</body>
</html>
